{% include 'layout/navbar.html.twig'%}

<br>
{% block body %}

<style>

.image_post{
        background-size: cover;
        background-repeat: no-repeat;
        background-position: 50% 50%;
        height: 300px;
        width: 100%;
    }

.image{
     background-size: cover;
     background-repeat: no-repeat;
     background-position: 50% 50%;
     height: 150px;
     width: 150px;
     border-radius:100px;
}

.post{
    text-align: center;
}

</style>

<div class="profil">
    <div class="userInfo">
        <div class= "image" style="background-image: url({{ asset('/uploads/' ~ user.pict) }})">
        </div>
        <div class= "infos">
            <h1 class="pseudo">{{user.pseudo}}   
                <a class="btn btn-primary" style="font-weight: bold; font-size: 16px; border-radius: 5px;" href="/abonnement/{{ user.id }}"><strong>Abonnements</strong></a>
            {% if app.user.id == user.id %}
                <a class="btn btn-success" style="font-weight: bold; font-size: 16px; border-radius: 100px;" href="{{ path('NewPost') }}"><strong>nouvelle oeuvre !</strong></a>
                <a class="btn btn-success" style="font-weight: bold; font-size: 16px; border-radius: 100px;" href="/abonnement/{{ user.id }}"><strong>abonnement</strong></a>
                <button id = "button" class="btn btn-primary">Modifier mon profil</button>
            {% endif %}
            </h1>
            <br>
            {{user.bio}}
        </div>
    </div>

    <div class="posts">
        {% for post in posts %}
        <div class = "post">
            {% set image = post.images|first %}
            {% if image != false %}
                <div class="image_post" style="background-image: url({{ asset('/uploads/' ~ image.pictName) }})">
                    </div>
            {% endif %}
            <br>
            <a class="btn btn-primary" href="/ShowPost/{{ post.id }}">Voir Plus</a>
        </div>  
        {% endfor %}
    </div>

    <div id = "modify">
        {{ form(form) }}
    </div>
</div>

    <script>
        var button = document.getElementById("button");
        var modify = document.getElementById("modify");
        let hidden = true;
        modify.style.display="none";
        button.addEventListener('click', () => {
            if(hidden){
                modify.style.display="block";
                modify.style.width="70%";
                button.textContent="Annuler la modification";
                hidden = false;
            }
            else {
                button.textContent="Modifier le profil"
                modify.style.display="none";
                hidden = true;
            }
        });
    </script>
{% endblock %}
